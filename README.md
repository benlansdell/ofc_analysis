# OFC decoder

## What it does

Performs a few sanity checks on the data, by seeing if cell tracked over multiple days depend on treatment, or if behavior (e.g. always choosing rewarded side) is biased responsive cell analysis. 

Then compute a mutual information analysis between cell responsive labels between days, showing Idazoxan labels have little relation to previous cell responses. 

Then fit a LDA decoder to the trajectories and show that chlonidine continues to predict reward even after reversal and that idazoxan predictions are more strongly oscillating between one prediction and the other. 

## Setup

This can be run from dnb2's JuptyerHub server: `dnb2:8000`. The default conda environment should have all the packages needed to run these analyses. 

If not, you can install the requirements with
```
pip install -r requirements.txt
```

### Data

Input data was generated by Cameron and is located in either `data/input` or `data/processed`. 
In particular, files that are needed are:
* `cell_multiday_analysis.ipynb`: `./data/input/explore.csv`, `./data/input/explore2.csv`
* `decoder.py`: `./data/processed/full2.csv`
* `mutual_information.ipynb`: `./data/input/type_info.csv`
* `roc_multirecording_balanced.Rmd`: processed recording data, located at `/media/core/core_operations/ImageAnalysisScratch/Schwarz/Cameron/FOR_ROC/`

Some of these have been added to the repo. Some are too large to add.

## How to run

You should run each notebook/script from this base project directory.

### 1 Cell multi-day analysis

Run through `cell_multiday_analysis.ipynb`. The 

### 2 Mutual information 

Run through `mutual_information.ipynb`.

### 3 Decoder analyses

Decoder results are saved in repo, allowing you to make plots with `decoder_analysis_plots.ipynb` and `decoder_sample_plots.ipynb`.

You can run the decoder with `decoder.py`. You can do this from within a terminal with
```
python src/decoder.py
```